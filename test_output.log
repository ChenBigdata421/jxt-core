=== RUN   TestKafkaVsNATSPerformanceComparison
    kafka_nats_envelope_comparison_test.go:328: 🚀 ===== Kafka vs NATS JetStream 全面性能对比测试 =====
    kafka_nats_envelope_comparison_test.go:329: 📋 测试要求:
    kafka_nats_envelope_comparison_test.go:330:    1. 创建 EventBus 实例（Kafka 和 NATS JetStream）
    kafka_nats_envelope_comparison_test.go:331:    2. NATS JetStream 持久化到磁盘
    kafka_nats_envelope_comparison_test.go:332:    3. 使用 PublishEnvelope 方法发布
    kafka_nats_envelope_comparison_test.go:333:    4. 使用 SubscribeEnvelope 方法订阅
    kafka_nats_envelope_comparison_test.go:334:    5. 测试压力：低压500、中压2000、高压5000、极限10000
    kafka_nats_envelope_comparison_test.go:335:    6. Topic 数量：5
    kafka_nats_envelope_comparison_test.go:336:    7. 统计连接数和消费者组个数
    kafka_nats_envelope_comparison_test.go:337:    8. 仅使用 ASCII 字符命名
    kafka_nats_envelope_comparison_test.go:338: 
    kafka_nats_envelope_comparison_test.go:359: 
        ================================================================================
    kafka_nats_envelope_comparison_test.go:360: 🎯 开始 低压 测试 (500 条消息)
    kafka_nats_envelope_comparison_test.go:361: ================================================================================
    kafka_nats_envelope_comparison_test.go:297: 
        🔄 准备测试环境: 低压
    kafka_nats_envelope_comparison_test.go:205: 🧹 清理 Kafka 测试数据 (topic prefix: kafka.perf)...
    kafka_nats_envelope_comparison_test.go:241: ⚠️  删除 topic kafka.perf.extreme.topic5 失败: kafka server: Request was for a topic or partition that does not exist on this broker
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.extreme.topic2
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.extreme.topic3
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.extreme.topic1
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.extreme.topic4
    kafka_nats_envelope_comparison_test.go:246: ✅ 成功删除 5 个 Kafka topics
    kafka_nats_envelope_comparison_test.go:254: 🧹 清理 NATS JetStream 测试数据 (stream prefix: PERF_)...
    kafka_nats_envelope_comparison_test.go:282:    ✅ 已删除 stream: PERF_extreme_1760518047
    kafka_nats_envelope_comparison_test.go:289: ✅ 成功删除 1 个 NATS streams
    kafka_nats_envelope_comparison_test.go:309: ✅ 测试环境准备完成
    kafka_nats_envelope_comparison_test.go:367: 
        🔴 测试 Kafka...
    kafka_nats_envelope_comparison_test.go:136: 🔧 创建 Kafka Topics (分区数: 3)...
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.low.topic1 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.low.topic2 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.low.topic3 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.low.topic4 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.low.topic5 (3 partitions)
    kafka_nats_envelope_comparison_test.go:183: 📊 验证创建的 Topics:
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.low.topic1: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.low.topic2: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.low.topic3: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.low.topic4: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.low.topic5: 3 partitions
    kafka_nats_envelope_comparison_test.go:199: ✅ 成功创建 5 个 Kafka topics
2025-10-15T16:48:51.380+0800	INFO	logger/logger.go:48	Kafka EventBus created successfully (AsyncProducer mode)brokers[localhost:29094]clientIdkafka-perf-low-1760518129healthCheckInterval30scompressionsnappyflushFrequency10msflushMessages100flushBytes1048576
    kafka_nats_envelope_comparison_test.go:510: ✅ 已设置预订阅 topic 列表: [kafka.perf.low.topic1 kafka.perf.low.topic2 kafka.perf.low.topic3 kafka.perf.low.topic4 kafka.perf.low.topic5]
    kafka_nats_envelope_comparison_test.go:773: ✅ 发送完成: 500/500 条消息
    kafka_nats_envelope_comparison_test.go:777: 📊 Kafka Topic 分区配置:
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.low.topic1: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.low.topic2: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.low.topic3: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.low.topic4: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.low.topic5: 3 partitions
    kafka_nats_envelope_comparison_test.go:784: ⏳ 等待消息处理完成...
    kafka_nats_envelope_comparison_test.go:479: ⏳ 等待 Kafka EventBus goroutines 退出...
    kafka_nats_envelope_comparison_test.go:494: 📊 Kafka 资源清理完成: 初始 3 -> 最终 3 (泄漏 0)
    kafka_nats_envelope_comparison_test.go:372: ⏳ 等待资源释放...
    kafka_nats_envelope_comparison_test.go:377: 
        🔵 测试 NATS JetStream (磁盘持久化)...
2025-10-15T16:49:27.975+0800	INFO	logger/logger.go:48	NATS JetStream configured with global async publish handler{maxPending 11 100000  <nil>}
2025-10-15T16:49:27.976+0800	INFO	logger/logger.go:48	NATS EventBus created successfullyurls[nats://localhost:4223]clientIdnats-perf-low-1760518167
    kafka_nats_envelope_comparison_test.go:773: ✅ 发送完成: 500/500 条消息
    kafka_nats_envelope_comparison_test.go:784: ⏳ 等待消息处理完成...
    kafka_nats_envelope_comparison_test.go:600: ⏳ 等待 NATS EventBus goroutines 退出...
    kafka_nats_envelope_comparison_test.go:615: 📊 NATS 资源清理完成: 初始 3 -> 最终 4 (泄漏 1)
    kafka_nats_envelope_comparison_test.go:1008: 
        ================================================================================
    kafka_nats_envelope_comparison_test.go:1009: 📊 低压 测试结果对比
    kafka_nats_envelope_comparison_test.go:1010: ================================================================================
    kafka_nats_envelope_comparison_test.go:1013: 
        📨 消息统计:
    kafka_nats_envelope_comparison_test.go:1014:    发送消息数                | Kafka:      500 | NATS:      500
    kafka_nats_envelope_comparison_test.go:1015:    接收消息数                | Kafka:      500 | NATS:      500
    kafka_nats_envelope_comparison_test.go:1016:    成功率                  | Kafka:  100.00% | NATS:  100.00%
    kafka_nats_envelope_comparison_test.go:1017:    发送错误                 | Kafka:        0 | NATS:        0
    kafka_nats_envelope_comparison_test.go:1018:    处理错误                 | Kafka:        0 | NATS:        0
    kafka_nats_envelope_comparison_test.go:1019:    顺序违反                 | Kafka:        0 | NATS:        0
    kafka_nats_envelope_comparison_test.go:1022: 
        🚀 性能指标:
    kafka_nats_envelope_comparison_test.go:1023:    发送吞吐量                | Kafka:      33.33 msg/s | NATS:      33.32 msg/s
    kafka_nats_envelope_comparison_test.go:1024:    接收吞吐量                | Kafka:      33.33 msg/s | NATS:      33.32 msg/s
    kafka_nats_envelope_comparison_test.go:1025:    平均发送延迟               | Kafka:      0.192 ms | NATS:      0.409 ms
    kafka_nats_envelope_comparison_test.go:1026:    平均处理延迟               | Kafka:      0.006 ms | NATS:      0.001 ms
    kafka_nats_envelope_comparison_test.go:1027:    总耗时                  | Kafka:      15.00 s | NATS:      15.01 s
    kafka_nats_envelope_comparison_test.go:1030: 
        💾 资源占用:
    kafka_nats_envelope_comparison_test.go:1031:    初始协程数                | Kafka:        3 | NATS:        3
    kafka_nats_envelope_comparison_test.go:1032:    峰值协程数                | Kafka:      449 | NATS:      274
    kafka_nats_envelope_comparison_test.go:1033:    最终协程数                | Kafka:        3 | NATS:        4
    kafka_nats_envelope_comparison_test.go:1034:    协程泄漏                 | Kafka:        0 | NATS:        1
    kafka_nats_envelope_comparison_test.go:1035:    初始内存                 | Kafka:       1.51 MB | NATS:       1.80 MB
    kafka_nats_envelope_comparison_test.go:1036:    峰值内存                 | Kafka:       7.38 MB | NATS:      10.35 MB
    kafka_nats_envelope_comparison_test.go:1037:    最终内存                 | Kafka:       4.29 MB | NATS:       4.14 MB
    kafka_nats_envelope_comparison_test.go:1038:    内存增量                 | Kafka:       2.79 MB | NATS:       2.34 MB
    kafka_nats_envelope_comparison_test.go:1041: 
        🔗 连接和消费者组:
    kafka_nats_envelope_comparison_test.go:1042:    Topic 数量             | Kafka:        5 | NATS:        5
    kafka_nats_envelope_comparison_test.go:1043:    连接数                  | Kafka:        1 | NATS:        1
    kafka_nats_envelope_comparison_test.go:1044:    消费者组个数               | Kafka:        1 | NATS:        1
    kafka_nats_envelope_comparison_test.go:1046:    Kafka Topics: [kafka.perf.low.topic1 kafka.perf.low.topic2 kafka.perf.low.topic3 kafka.perf.low.topic4 kafka.perf.low.topic5]
    kafka_nats_envelope_comparison_test.go:1051:    Kafka Partitions:
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.low.topic1: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.low.topic2: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.low.topic3: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.low.topic4: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.low.topic5: 3 partitions
    kafka_nats_envelope_comparison_test.go:1058:    NATS Topics: [nats.perf.low.1760518167.topic1 nats.perf.low.1760518167.topic2 nats.perf.low.1760518167.topic3 nats.perf.low.1760518167.topic4 nats.perf.low.1760518167.topic5]
    kafka_nats_envelope_comparison_test.go:1062: 
        🏆 性能优势:
    kafka_nats_envelope_comparison_test.go:1065:    Kafka 吞吐量优势: +0.03%
    kafka_nats_envelope_comparison_test.go:1076:    NATS 延迟优势: -83.12%
    kafka_nats_envelope_comparison_test.go:1084:    NATS 内存优势: -15.91%
    kafka_nats_envelope_comparison_test.go:1087: ================================================================================
    kafka_nats_envelope_comparison_test.go:385: ⏳ 等待资源释放...
    kafka_nats_envelope_comparison_test.go:359: 
        ================================================================================
    kafka_nats_envelope_comparison_test.go:360: 🎯 开始 中压 测试 (2000 条消息)
    kafka_nats_envelope_comparison_test.go:361: ================================================================================
    kafka_nats_envelope_comparison_test.go:297: 
        🔄 准备测试环境: 中压
    kafka_nats_envelope_comparison_test.go:205: 🧹 清理 Kafka 测试数据 (topic prefix: kafka.perf)...
    kafka_nats_envelope_comparison_test.go:241: ⚠️  删除 topic kafka.perf.low.topic4 失败: kafka server: Request was for a topic or partition that does not exist on this broker
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.low.topic3
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.low.topic2
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.low.topic1
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.low.topic5
    kafka_nats_envelope_comparison_test.go:246: ✅ 成功删除 5 个 Kafka topics
    kafka_nats_envelope_comparison_test.go:254: 🧹 清理 NATS JetStream 测试数据 (stream prefix: PERF_)...
    kafka_nats_envelope_comparison_test.go:282:    ✅ 已删除 stream: PERF_low_1760518167
    kafka_nats_envelope_comparison_test.go:289: ✅ 成功删除 1 个 NATS streams
    kafka_nats_envelope_comparison_test.go:309: ✅ 测试环境准备完成
    kafka_nats_envelope_comparison_test.go:367: 
        🔴 测试 Kafka...
    kafka_nats_envelope_comparison_test.go:136: 🔧 创建 Kafka Topics (分区数: 3)...
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.medium.topic1 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.medium.topic2 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.medium.topic3 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.medium.topic4 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.medium.topic5 (3 partitions)
    kafka_nats_envelope_comparison_test.go:183: 📊 验证创建的 Topics:
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.medium.topic1: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.medium.topic2: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.medium.topic3: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.medium.topic4: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.medium.topic5: 3 partitions
    kafka_nats_envelope_comparison_test.go:199: ✅ 成功创建 5 个 Kafka topics
2025-10-15T16:50:04.585+0800	INFO	logger/logger.go:48	Kafka EventBus created successfully (AsyncProducer mode)brokers[localhost:29094]clientIdkafka-perf-medium-1760518202healthCheckInterval30scompressionsnappyflushFrequency10msflushMessages100flushBytes1048576
    kafka_nats_envelope_comparison_test.go:510: ✅ 已设置预订阅 topic 列表: [kafka.perf.medium.topic1 kafka.perf.medium.topic2 kafka.perf.medium.topic3 kafka.perf.medium.topic4 kafka.perf.medium.topic5]
    kafka_nats_envelope_comparison_test.go:773: ✅ 发送完成: 2000/2000 条消息
    kafka_nats_envelope_comparison_test.go:777: 📊 Kafka Topic 分区配置:
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.medium.topic1: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.medium.topic2: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.medium.topic3: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.medium.topic4: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.medium.topic5: 3 partitions
    kafka_nats_envelope_comparison_test.go:784: ⏳ 等待消息处理完成...
    kafka_nats_envelope_comparison_test.go:479: ⏳ 等待 Kafka EventBus goroutines 退出...
    kafka_nats_envelope_comparison_test.go:494: 📊 Kafka 资源清理完成: 初始 4 -> 最终 4 (泄漏 0)
    kafka_nats_envelope_comparison_test.go:372: ⏳ 等待资源释放...
    kafka_nats_envelope_comparison_test.go:377: 
        🔵 测试 NATS JetStream (磁盘持久化)...
2025-10-15T16:50:41.153+0800	INFO	logger/logger.go:48	NATS JetStream configured with global async publish handler{maxPending 11 100000  <nil>}
2025-10-15T16:50:41.153+0800	INFO	logger/logger.go:48	NATS EventBus created successfullyurls[nats://localhost:4223]clientIdnats-perf-medium-1760518241
    kafka_nats_envelope_comparison_test.go:773: ✅ 发送完成: 2000/2000 条消息
    kafka_nats_envelope_comparison_test.go:784: ⏳ 等待消息处理完成...
    kafka_nats_envelope_comparison_test.go:600: ⏳ 等待 NATS EventBus goroutines 退出...
    kafka_nats_envelope_comparison_test.go:615: 📊 NATS 资源清理完成: 初始 4 -> 最终 5 (泄漏 1)
    kafka_nats_envelope_comparison_test.go:1008: 
        ================================================================================
    kafka_nats_envelope_comparison_test.go:1009: 📊 中压 测试结果对比
    kafka_nats_envelope_comparison_test.go:1010: ================================================================================
    kafka_nats_envelope_comparison_test.go:1013: 
        📨 消息统计:
    kafka_nats_envelope_comparison_test.go:1014:    发送消息数                | Kafka:     2000 | NATS:     2000
    kafka_nats_envelope_comparison_test.go:1015:    接收消息数                | Kafka:     2000 | NATS:     2000
    kafka_nats_envelope_comparison_test.go:1016:    成功率                  | Kafka:  100.00% | NATS:  100.00%
    kafka_nats_envelope_comparison_test.go:1017:    发送错误                 | Kafka:        0 | NATS:        0
    kafka_nats_envelope_comparison_test.go:1018:    处理错误                 | Kafka:        0 | NATS:        0
    kafka_nats_envelope_comparison_test.go:1019:    顺序违反                 | Kafka:        0 | NATS:        0
    kafka_nats_envelope_comparison_test.go:1022: 
        🚀 性能指标:
    kafka_nats_envelope_comparison_test.go:1023:    发送吞吐量                | Kafka:     133.27 msg/s | NATS:     133.08 msg/s
    kafka_nats_envelope_comparison_test.go:1024:    接收吞吐量                | Kafka:     133.27 msg/s | NATS:     133.08 msg/s
    kafka_nats_envelope_comparison_test.go:1025:    平均发送延迟               | Kafka:      0.593 ms | NATS:      1.122 ms
    kafka_nats_envelope_comparison_test.go:1026:    平均处理延迟               | Kafka:      0.003 ms | NATS:      0.004 ms
    kafka_nats_envelope_comparison_test.go:1027:    总耗时                  | Kafka:      15.01 s | NATS:      15.03 s
    kafka_nats_envelope_comparison_test.go:1030: 
        💾 资源占用:
    kafka_nats_envelope_comparison_test.go:1031:    初始协程数                | Kafka:        4 | NATS:        4
    kafka_nats_envelope_comparison_test.go:1032:    峰值协程数                | Kafka:      450 | NATS:      472
    kafka_nats_envelope_comparison_test.go:1033:    最终协程数                | Kafka:        4 | NATS:        5
    kafka_nats_envelope_comparison_test.go:1034:    协程泄漏                 | Kafka:        0 | NATS:        1
    kafka_nats_envelope_comparison_test.go:1035:    初始内存                 | Kafka:       4.14 MB | NATS:       4.36 MB
    kafka_nats_envelope_comparison_test.go:1036:    峰值内存                 | Kafka:      15.71 MB | NATS:      15.24 MB
    kafka_nats_envelope_comparison_test.go:1037:    最终内存                 | Kafka:       6.87 MB | NATS:       6.69 MB
    kafka_nats_envelope_comparison_test.go:1038:    内存增量                 | Kafka:       2.73 MB | NATS:       2.33 MB
    kafka_nats_envelope_comparison_test.go:1041: 
        🔗 连接和消费者组:
    kafka_nats_envelope_comparison_test.go:1042:    Topic 数量             | Kafka:        5 | NATS:        5
    kafka_nats_envelope_comparison_test.go:1043:    连接数                  | Kafka:        1 | NATS:        1
    kafka_nats_envelope_comparison_test.go:1044:    消费者组个数               | Kafka:        1 | NATS:        1
    kafka_nats_envelope_comparison_test.go:1046:    Kafka Topics: [kafka.perf.medium.topic1 kafka.perf.medium.topic2 kafka.perf.medium.topic3 kafka.perf.medium.topic4 kafka.perf.medium.topic5]
    kafka_nats_envelope_comparison_test.go:1051:    Kafka Partitions:
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.medium.topic1: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.medium.topic2: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.medium.topic3: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.medium.topic4: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.medium.topic5: 3 partitions
    kafka_nats_envelope_comparison_test.go:1058:    NATS Topics: [nats.perf.medium.1760518241.topic1 nats.perf.medium.1760518241.topic2 nats.perf.medium.1760518241.topic3 nats.perf.medium.1760518241.topic4 nats.perf.medium.1760518241.topic5]
    kafka_nats_envelope_comparison_test.go:1062: 
        🏆 性能优势:
    kafka_nats_envelope_comparison_test.go:1065:    Kafka 吞吐量优势: +0.14%
    kafka_nats_envelope_comparison_test.go:1073:    Kafka 延迟优势: -26.28%
    kafka_nats_envelope_comparison_test.go:1084:    NATS 内存优势: -14.47%
    kafka_nats_envelope_comparison_test.go:1087: ================================================================================
    kafka_nats_envelope_comparison_test.go:385: ⏳ 等待资源释放...
    kafka_nats_envelope_comparison_test.go:359: 
        ================================================================================
    kafka_nats_envelope_comparison_test.go:360: 🎯 开始 高压 测试 (5000 条消息)
    kafka_nats_envelope_comparison_test.go:361: ================================================================================
    kafka_nats_envelope_comparison_test.go:297: 
        🔄 准备测试环境: 高压
    kafka_nats_envelope_comparison_test.go:205: 🧹 清理 Kafka 测试数据 (topic prefix: kafka.perf)...
    kafka_nats_envelope_comparison_test.go:241: ⚠️  删除 topic kafka.perf.medium.topic2 失败: kafka server: Request was for a topic or partition that does not exist on this broker
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.medium.topic4
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.medium.topic5
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.medium.topic3
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.medium.topic1
    kafka_nats_envelope_comparison_test.go:246: ✅ 成功删除 5 个 Kafka topics
    kafka_nats_envelope_comparison_test.go:254: 🧹 清理 NATS JetStream 测试数据 (stream prefix: PERF_)...
    kafka_nats_envelope_comparison_test.go:282:    ✅ 已删除 stream: PERF_medium_1760518241
    kafka_nats_envelope_comparison_test.go:289: ✅ 成功删除 1 个 NATS streams
    kafka_nats_envelope_comparison_test.go:309: ✅ 测试环境准备完成
    kafka_nats_envelope_comparison_test.go:367: 
        🔴 测试 Kafka...
    kafka_nats_envelope_comparison_test.go:136: 🔧 创建 Kafka Topics (分区数: 3)...
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.high.topic1 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.high.topic2 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.high.topic3 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.high.topic4 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.high.topic5 (3 partitions)
    kafka_nats_envelope_comparison_test.go:183: 📊 验证创建的 Topics:
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.high.topic1: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.high.topic2: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.high.topic3: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.high.topic4: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.high.topic5: 3 partitions
    kafka_nats_envelope_comparison_test.go:199: ✅ 成功创建 5 个 Kafka topics
2025-10-15T16:51:17.437+0800	INFO	logger/logger.go:48	Kafka EventBus created successfully (AsyncProducer mode)brokers[localhost:29094]clientIdkafka-perf-high-1760518275healthCheckInterval30scompressionsnappyflushFrequency10msflushMessages100flushBytes1048576
    kafka_nats_envelope_comparison_test.go:510: ✅ 已设置预订阅 topic 列表: [kafka.perf.high.topic1 kafka.perf.high.topic2 kafka.perf.high.topic3 kafka.perf.high.topic4 kafka.perf.high.topic5]
    kafka_nats_envelope_comparison_test.go:773: ✅ 发送完成: 5000/5000 条消息
    kafka_nats_envelope_comparison_test.go:777: 📊 Kafka Topic 分区配置:
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.high.topic3: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.high.topic4: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.high.topic5: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.high.topic1: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.high.topic2: 3 partitions
    kafka_nats_envelope_comparison_test.go:784: ⏳ 等待消息处理完成...
    kafka_nats_envelope_comparison_test.go:479: ⏳ 等待 Kafka EventBus goroutines 退出...
    kafka_nats_envelope_comparison_test.go:494: 📊 Kafka 资源清理完成: 初始 5 -> 最终 5 (泄漏 0)
    kafka_nats_envelope_comparison_test.go:372: ⏳ 等待资源释放...
    kafka_nats_envelope_comparison_test.go:377: 
        🔵 测试 NATS JetStream (磁盘持久化)...
2025-10-15T16:52:08.691+0800	INFO	logger/logger.go:48	NATS JetStream configured with global async publish handler{maxPending 11 100000  <nil>}
2025-10-15T16:52:08.691+0800	INFO	logger/logger.go:48	NATS EventBus created successfullyurls[nats://localhost:4223]clientIdnats-perf-high-1760518328
    kafka_nats_envelope_comparison_test.go:773: ✅ 发送完成: 5000/5000 条消息
    kafka_nats_envelope_comparison_test.go:784: ⏳ 等待消息处理完成...
    kafka_nats_envelope_comparison_test.go:600: ⏳ 等待 NATS EventBus goroutines 退出...
    kafka_nats_envelope_comparison_test.go:615: 📊 NATS 资源清理完成: 初始 5 -> 最终 6 (泄漏 1)
    kafka_nats_envelope_comparison_test.go:1008: 
        ================================================================================
    kafka_nats_envelope_comparison_test.go:1009: 📊 高压 测试结果对比
    kafka_nats_envelope_comparison_test.go:1010: ================================================================================
    kafka_nats_envelope_comparison_test.go:1013: 
        📨 消息统计:
    kafka_nats_envelope_comparison_test.go:1014:    发送消息数                | Kafka:     5000 | NATS:     5000
    kafka_nats_envelope_comparison_test.go:1015:    接收消息数                | Kafka:     5000 | NATS:     5000
    kafka_nats_envelope_comparison_test.go:1016:    成功率                  | Kafka:  100.00% | NATS:  100.00%
    kafka_nats_envelope_comparison_test.go:1017:    发送错误                 | Kafka:        0 | NATS:        0
    kafka_nats_envelope_comparison_test.go:1018:    处理错误                 | Kafka:        0 | NATS:        0
    kafka_nats_envelope_comparison_test.go:1019:    顺序违反                 | Kafka:        0 | NATS:        0
    kafka_nats_envelope_comparison_test.go:1022: 
        🚀 性能指标:
    kafka_nats_envelope_comparison_test.go:1023:    发送吞吐量                | Kafka:     166.57 msg/s | NATS:     166.33 msg/s
    kafka_nats_envelope_comparison_test.go:1024:    接收吞吐量                | Kafka:     166.57 msg/s | NATS:     166.33 msg/s
    kafka_nats_envelope_comparison_test.go:1025:    平均发送延迟               | Kafka:      1.120 ms | NATS:      3.158 ms
    kafka_nats_envelope_comparison_test.go:1026:    平均处理延迟               | Kafka:      0.004 ms | NATS:      0.003 ms
    kafka_nats_envelope_comparison_test.go:1027:    总耗时                  | Kafka:      30.02 s | NATS:      30.06 s
    kafka_nats_envelope_comparison_test.go:1030: 
        💾 资源占用:
    kafka_nats_envelope_comparison_test.go:1031:    初始协程数                | Kafka:        5 | NATS:        5
    kafka_nats_envelope_comparison_test.go:1032:    峰值协程数                | Kafka:      451 | NATS:      732
    kafka_nats_envelope_comparison_test.go:1033:    最终协程数                | Kafka:        5 | NATS:        6
    kafka_nats_envelope_comparison_test.go:1034:    协程泄漏                 | Kafka:        0 | NATS:        1
    kafka_nats_envelope_comparison_test.go:1035:    初始内存                 | Kafka:       6.69 MB | NATS:       6.97 MB
    kafka_nats_envelope_comparison_test.go:1036:    峰值内存                 | Kafka:      24.52 MB | NATS:      22.20 MB
    kafka_nats_envelope_comparison_test.go:1037:    最终内存                 | Kafka:       9.50 MB | NATS:       9.47 MB
    kafka_nats_envelope_comparison_test.go:1038:    内存增量                 | Kafka:       2.81 MB | NATS:       2.50 MB
    kafka_nats_envelope_comparison_test.go:1041: 
        🔗 连接和消费者组:
    kafka_nats_envelope_comparison_test.go:1042:    Topic 数量             | Kafka:        5 | NATS:        5
    kafka_nats_envelope_comparison_test.go:1043:    连接数                  | Kafka:        1 | NATS:        1
    kafka_nats_envelope_comparison_test.go:1044:    消费者组个数               | Kafka:        1 | NATS:        1
    kafka_nats_envelope_comparison_test.go:1046:    Kafka Topics: [kafka.perf.high.topic1 kafka.perf.high.topic2 kafka.perf.high.topic3 kafka.perf.high.topic4 kafka.perf.high.topic5]
    kafka_nats_envelope_comparison_test.go:1051:    Kafka Partitions:
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.high.topic5: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.high.topic1: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.high.topic2: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.high.topic3: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.high.topic4: 3 partitions
    kafka_nats_envelope_comparison_test.go:1058:    NATS Topics: [nats.perf.high.1760518328.topic1 nats.perf.high.1760518328.topic2 nats.perf.high.1760518328.topic3 nats.perf.high.1760518328.topic4 nats.perf.high.1760518328.topic5]
    kafka_nats_envelope_comparison_test.go:1062: 
        🏆 性能优势:
    kafka_nats_envelope_comparison_test.go:1065:    Kafka 吞吐量优势: +0.15%
    kafka_nats_envelope_comparison_test.go:1076:    NATS 延迟优势: -27.79%
    kafka_nats_envelope_comparison_test.go:1084:    NATS 内存优势: -10.89%
    kafka_nats_envelope_comparison_test.go:1087: ================================================================================
    kafka_nats_envelope_comparison_test.go:385: ⏳ 等待资源释放...
    kafka_nats_envelope_comparison_test.go:359: 
        ================================================================================
    kafka_nats_envelope_comparison_test.go:360: 🎯 开始 极限 测试 (10000 条消息)
    kafka_nats_envelope_comparison_test.go:361: ================================================================================
    kafka_nats_envelope_comparison_test.go:297: 
        🔄 准备测试环境: 极限
    kafka_nats_envelope_comparison_test.go:205: 🧹 清理 Kafka 测试数据 (topic prefix: kafka.perf)...
    kafka_nats_envelope_comparison_test.go:241: ⚠️  删除 topic kafka.perf.high.topic3 失败: kafka server: Request was for a topic or partition that does not exist on this broker
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.high.topic1
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.high.topic5
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.high.topic4
    kafka_nats_envelope_comparison_test.go:243:    ✅ 已删除 topic: kafka.perf.high.topic2
    kafka_nats_envelope_comparison_test.go:246: ✅ 成功删除 5 个 Kafka topics
    kafka_nats_envelope_comparison_test.go:254: 🧹 清理 NATS JetStream 测试数据 (stream prefix: PERF_)...
    kafka_nats_envelope_comparison_test.go:282:    ✅ 已删除 stream: PERF_high_1760518328
    kafka_nats_envelope_comparison_test.go:289: ✅ 成功删除 1 个 NATS streams
    kafka_nats_envelope_comparison_test.go:309: ✅ 测试环境准备完成
    kafka_nats_envelope_comparison_test.go:367: 
        🔴 测试 Kafka...
    kafka_nats_envelope_comparison_test.go:136: 🔧 创建 Kafka Topics (分区数: 3)...
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.extreme.topic1 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.extreme.topic2 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.extreme.topic3 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.extreme.topic4 (3 partitions)
    kafka_nats_envelope_comparison_test.go:175:    ✅ 创建成功: kafka.perf.extreme.topic5 (3 partitions)
    kafka_nats_envelope_comparison_test.go:183: 📊 验证创建的 Topics:
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.extreme.topic1: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.extreme.topic2: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.extreme.topic3: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.extreme.topic4: 3 partitions
    kafka_nats_envelope_comparison_test.go:193:    kafka.perf.extreme.topic5: 3 partitions
    kafka_nats_envelope_comparison_test.go:199: ✅ 成功创建 5 个 Kafka topics
2025-10-15T16:53:00.079+0800	INFO	logger/logger.go:48	Kafka EventBus created successfully (AsyncProducer mode)brokers[localhost:29094]clientIdkafka-perf-extreme-1760518378healthCheckInterval30scompressionsnappyflushFrequency10msflushMessages100flushBytes1048576
    kafka_nats_envelope_comparison_test.go:510: ✅ 已设置预订阅 topic 列表: [kafka.perf.extreme.topic1 kafka.perf.extreme.topic2 kafka.perf.extreme.topic3 kafka.perf.extreme.topic4 kafka.perf.extreme.topic5]
    kafka_nats_envelope_comparison_test.go:773: ✅ 发送完成: 10000/10000 条消息
    kafka_nats_envelope_comparison_test.go:777: 📊 Kafka Topic 分区配置:
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.extreme.topic1: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.extreme.topic2: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.extreme.topic3: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.extreme.topic4: 3 partitions
    kafka_nats_envelope_comparison_test.go:779:    kafka.perf.extreme.topic5: 3 partitions
    kafka_nats_envelope_comparison_test.go:784: ⏳ 等待消息处理完成...
    kafka_nats_envelope_comparison_test.go:479: ⏳ 等待 Kafka EventBus goroutines 退出...
    kafka_nats_envelope_comparison_test.go:494: 📊 Kafka 资源清理完成: 初始 6 -> 最终 6 (泄漏 0)
    kafka_nats_envelope_comparison_test.go:372: ⏳ 等待资源释放...
    kafka_nats_envelope_comparison_test.go:377: 
        🔵 测试 NATS JetStream (磁盘持久化)...
2025-10-15T16:53:51.385+0800	INFO	logger/logger.go:48	NATS JetStream configured with global async publish handler{maxPending 11 100000  <nil>}
2025-10-15T16:53:51.385+0800	INFO	logger/logger.go:48	NATS EventBus created successfullyurls[nats://localhost:4223]clientIdnats-perf-extreme-1760518431
    kafka_nats_envelope_comparison_test.go:773: ✅ 发送完成: 10000/10000 条消息
    kafka_nats_envelope_comparison_test.go:784: ⏳ 等待消息处理完成...
    kafka_nats_envelope_comparison_test.go:600: ⏳ 等待 NATS EventBus goroutines 退出...
    kafka_nats_envelope_comparison_test.go:615: 📊 NATS 资源清理完成: 初始 6 -> 最终 7 (泄漏 1)
    kafka_nats_envelope_comparison_test.go:1008: 
        ================================================================================
    kafka_nats_envelope_comparison_test.go:1009: 📊 极限 测试结果对比
    kafka_nats_envelope_comparison_test.go:1010: ================================================================================
    kafka_nats_envelope_comparison_test.go:1013: 
        📨 消息统计:
    kafka_nats_envelope_comparison_test.go:1014:    发送消息数                | Kafka:    10000 | NATS:    10000
    kafka_nats_envelope_comparison_test.go:1015:    接收消息数                | Kafka:    10000 | NATS:    10000
    kafka_nats_envelope_comparison_test.go:1016:    成功率                  | Kafka:  100.00% | NATS:  100.00%
    kafka_nats_envelope_comparison_test.go:1017:    发送错误                 | Kafka:        0 | NATS:        0
    kafka_nats_envelope_comparison_test.go:1018:    处理错误                 | Kafka:        0 | NATS:        0
    kafka_nats_envelope_comparison_test.go:1019:    顺序违反                 | Kafka:        0 | NATS:        0
    kafka_nats_envelope_comparison_test.go:1022: 
        🚀 性能指标:
    kafka_nats_envelope_comparison_test.go:1023:    发送吞吐量                | Kafka:     332.94 msg/s | NATS:     332.36 msg/s
    kafka_nats_envelope_comparison_test.go:1024:    接收吞吐量                | Kafka:     332.94 msg/s | NATS:     332.36 msg/s
    kafka_nats_envelope_comparison_test.go:1025:    平均发送延迟               | Kafka:      2.932 ms | NATS:      4.967 ms
    kafka_nats_envelope_comparison_test.go:1026:    平均处理延迟               | Kafka:      0.003 ms | NATS:      0.004 ms
    kafka_nats_envelope_comparison_test.go:1027:    总耗时                  | Kafka:      30.04 s | NATS:      30.09 s
    kafka_nats_envelope_comparison_test.go:1030: 
        💾 资源占用:
    kafka_nats_envelope_comparison_test.go:1031:    初始协程数                | Kafka:        6 | NATS:        6
    kafka_nats_envelope_comparison_test.go:1032:    峰值协程数                | Kafka:      452 | NATS:     1276
    kafka_nats_envelope_comparison_test.go:1033:    最终协程数                | Kafka:        6 | NATS:        7
    kafka_nats_envelope_comparison_test.go:1034:    协程泄漏                 | Kafka:        0 | NATS:        1
    kafka_nats_envelope_comparison_test.go:1035:    初始内存                 | Kafka:       9.48 MB | NATS:       9.82 MB
    kafka_nats_envelope_comparison_test.go:1036:    峰值内存                 | Kafka:      36.96 MB | NATS:      28.68 MB
    kafka_nats_envelope_comparison_test.go:1037:    最终内存                 | Kafka:      12.37 MB | NATS:      12.31 MB
    kafka_nats_envelope_comparison_test.go:1038:    内存增量                 | Kafka:       2.90 MB | NATS:       2.49 MB
    kafka_nats_envelope_comparison_test.go:1041: 
        🔗 连接和消费者组:
    kafka_nats_envelope_comparison_test.go:1042:    Topic 数量             | Kafka:        5 | NATS:        5
    kafka_nats_envelope_comparison_test.go:1043:    连接数                  | Kafka:        1 | NATS:        1
    kafka_nats_envelope_comparison_test.go:1044:    消费者组个数               | Kafka:        1 | NATS:        1
    kafka_nats_envelope_comparison_test.go:1046:    Kafka Topics: [kafka.perf.extreme.topic1 kafka.perf.extreme.topic2 kafka.perf.extreme.topic3 kafka.perf.extreme.topic4 kafka.perf.extreme.topic5]
    kafka_nats_envelope_comparison_test.go:1051:    Kafka Partitions:
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.extreme.topic5: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.extreme.topic1: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.extreme.topic2: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.extreme.topic3: 3 partitions
    kafka_nats_envelope_comparison_test.go:1053:       kafka.perf.extreme.topic4: 3 partitions
    kafka_nats_envelope_comparison_test.go:1058:    NATS Topics: [nats.perf.extreme.1760518431.topic1 nats.perf.extreme.1760518431.topic2 nats.perf.extreme.1760518431.topic3 nats.perf.extreme.1760518431.topic4 nats.perf.extreme.1760518431.topic5]
    kafka_nats_envelope_comparison_test.go:1062: 
        🏆 性能优势:
    kafka_nats_envelope_comparison_test.go:1065:    Kafka 吞吐量优势: +0.17%
    kafka_nats_envelope_comparison_test.go:1073:    Kafka 延迟优势: -17.49%
    kafka_nats_envelope_comparison_test.go:1084:    NATS 内存优势: -14.11%
    kafka_nats_envelope_comparison_test.go:1087: ================================================================================
    kafka_nats_envelope_comparison_test.go:385: ⏳ 等待资源释放...
    kafka_nats_envelope_comparison_test.go:1098: 
        ====================================================================================================
    kafka_nats_envelope_comparison_test.go:1099: 🏆 Kafka vs NATS JetStream 综合性能对比报告
    kafka_nats_envelope_comparison_test.go:1100: ====================================================================================================
    kafka_nats_envelope_comparison_test.go:1111: 
        📊 性能指标汇总表:
    kafka_nats_envelope_comparison_test.go:1112: 压力级别       | 系统              | 吞吐量(msg/s)      | 延迟(ms)          | 成功率(%)          | 内存增量(MB)        | 协程泄漏           
    kafka_nats_envelope_comparison_test.go:1114: ----------------------------------------------------------------------------------------------------
    kafka_nats_envelope_comparison_test.go:1120: 低压         | Kafka           |           33.33 |           0.006 |          100.00 |            2.79 |               0
    kafka_nats_envelope_comparison_test.go:1123: 低压         | NATS            |           33.32 |           0.001 |          100.00 |            2.34 |               1
    kafka_nats_envelope_comparison_test.go:1126: ----------------------------------------------------------------------------------------------------
    kafka_nats_envelope_comparison_test.go:1120: 中压         | Kafka           |          133.27 |           0.003 |          100.00 |            2.73 |               0
    kafka_nats_envelope_comparison_test.go:1123: 中压         | NATS            |          133.08 |           0.004 |          100.00 |            2.33 |               1
    kafka_nats_envelope_comparison_test.go:1126: ----------------------------------------------------------------------------------------------------
    kafka_nats_envelope_comparison_test.go:1120: 高压         | Kafka           |          166.57 |           0.004 |          100.00 |            2.81 |               0
    kafka_nats_envelope_comparison_test.go:1123: 高压         | NATS            |          166.33 |           0.003 |          100.00 |            2.50 |               1
    kafka_nats_envelope_comparison_test.go:1126: ----------------------------------------------------------------------------------------------------
    kafka_nats_envelope_comparison_test.go:1120: 极限         | Kafka           |          332.94 |           0.003 |          100.00 |            2.90 |               0
    kafka_nats_envelope_comparison_test.go:1123: 极限         | NATS            |          332.36 |           0.004 |          100.00 |            2.49 |               1
    kafka_nats_envelope_comparison_test.go:1126: ----------------------------------------------------------------------------------------------------
    kafka_nats_envelope_comparison_test.go:1152: 
        🎯 综合评分:
    kafka_nats_envelope_comparison_test.go:1153: 平均吞吐量                | Kafka:     166.53 msg/s | NATS:     166.27 msg/s
    kafka_nats_envelope_comparison_test.go:1154: 平均延迟                 | Kafka:      0.004 ms | NATS:      0.003 ms
    kafka_nats_envelope_comparison_test.go:1155: 平均内存增量               | Kafka:       2.80 MB | NATS:       2.42 MB
    kafka_nats_envelope_comparison_test.go:1159: 
        🔗 连接和消费者组统计:
    kafka_nats_envelope_comparison_test.go:1160: Topic 数量             | Kafka:        5 | NATS:        5
    kafka_nats_envelope_comparison_test.go:1161: 连接数                  | Kafka:        1 | NATS:        1
    kafka_nats_envelope_comparison_test.go:1162: 消费者组个数               | Kafka:        1 | NATS:        1
    kafka_nats_envelope_comparison_test.go:1166: 
        🏆 最终结论:
    kafka_nats_envelope_comparison_test.go:1173:    ✅ 吞吐量: Kafka 胜出 (+0.15%)
    kafka_nats_envelope_comparison_test.go:1187:    ✅ 延迟: NATS 胜出 (-29.39%)
    kafka_nats_envelope_comparison_test.go:1197:    ✅ 内存效率: NATS 胜出 (-13.84%)
    kafka_nats_envelope_comparison_test.go:1201: 
        🎉 总体获胜者:
    kafka_nats_envelope_comparison_test.go:1205:    🥇 NATS 以 2:1 获胜！
    kafka_nats_envelope_comparison_test.go:1211: 
        💡 使用建议:
    kafka_nats_envelope_comparison_test.go:1212: 🔴 选择 Kafka 当:
    kafka_nats_envelope_comparison_test.go:1213:    • 需要企业级可靠性和持久化保证
    kafka_nats_envelope_comparison_test.go:1214:    • 需要复杂的数据处理管道
    kafka_nats_envelope_comparison_test.go:1215:    • 需要成熟的生态系统和工具链
    kafka_nats_envelope_comparison_test.go:1216:    • 数据量大且需要长期保存
    kafka_nats_envelope_comparison_test.go:1218: 
        🔵 选择 NATS JetStream 当:
    kafka_nats_envelope_comparison_test.go:1219:    • 需要极致的性能和低延迟
    kafka_nats_envelope_comparison_test.go:1220:    • 需要简单的部署和运维
    kafka_nats_envelope_comparison_test.go:1221:    • 需要轻量级的消息传递
    kafka_nats_envelope_comparison_test.go:1222:    • 构建实时应用和微服务
    kafka_nats_envelope_comparison_test.go:1224: 
        ====================================================================================================
    kafka_nats_envelope_comparison_test.go:1225: ✅ 测试完成！共执行 4 个场景，8 次测试
    kafka_nats_envelope_comparison_test.go:1226: ====================================================================================================
--- PASS: TestKafkaVsNATSPerformanceComparison (351.35s)
PASS
ok  	github.com/ChenBigdata421/jxt-core/tests/eventbus/performance_tests	351.620s
