# Hollywood Actor Pool è¿ç§»æ–‡æ¡£ç´¢å¼•

> **é‡è¦**: æœ¬æ–¹æ¡ˆä½¿ç”¨ **å›ºå®š Actor Pool**,è€Œéä¸€ä¸ªèšåˆIDä¸€ä¸ªActor,é€‚åˆåƒä¸‡çº§èšåˆIDåœºæ™¯ã€‚

## ğŸ“š **æ–‡æ¡£å¯¼èˆª**

æœ¬ç›®å½•åŒ…å« jxt-core EventBus ä» Keyed Worker Pool è¿ç§»åˆ° Hollywood Actor Pool çš„å®Œæ•´æ–‡æ¡£ã€‚

---

## ğŸ¯ **å¿«é€Ÿå¼€å§‹**

### æ–°æ‰‹å…¥é—¨ (æŒ‰é¡ºåºé˜…è¯»)

1. **[Hollywood Actor Pool è¿ç§»æŒ‡å—](./hollywood-actor-pool-migration-guide.md)** â­â­â­â­â­
   - ğŸ—ï¸ Actor Pool æ¶æ„è®¾è®¡ (å›ºå®š256ä¸ªActor)
   - ğŸ’» å®Œæ•´ä»£ç å®ç°
   - âš™ï¸ é…ç½®ç¤ºä¾‹ (å« Mailbox æ·±åº¦åˆ†æ)
   - ğŸ“Š æ€§èƒ½å¯¹æ¯”
   - ğŸš€ è¿ç§»æ­¥éª¤ (5-8å¤©)
   - **æ¨è**: å¿…è¯»!æ ¸å¿ƒæ–¹æ¡ˆæ–‡æ¡£

2. **[Hollywood Mailbox æ·±åº¦è°ƒä¼˜æŒ‡å—](./hollywood-mailbox-tuning-guide.md)** â­â­â­â­â­
   - ğŸ“ Mailbox æ·±åº¦è®¡ç®—å…¬å¼
   - ğŸ“Š æ€§èƒ½å½±å“çŸ©é˜µ
   - ğŸ¯ é€‰æ‹©å†³ç­–æ ‘
   - ğŸ” ç›‘æ§ä¸è¯Šæ–­
   - ğŸ› ï¸ å®æˆ˜è°ƒä¼˜æ¡ˆä¾‹
   - **æ¨è**: å¿…è¯»!Mailbox æ˜¯å…³é”®æ€§èƒ½å‚æ•°

3. **[Hollywood Actor Pool Prometheus ç›‘æ§é›†æˆ](./hollywood-actor-pool-prometheus-integration.md)** â­â­â­â­â­
   - ğŸ“Š **æ··åˆæ–¹æ¡ˆ (æ¥å£æ³¨å…¥ + Middleware)** âœ…
   - ğŸ”Œ ä¸ EventBus ä¸€è‡´çš„æ¥å£æ³¨å…¥æ–¹å¼
   - ğŸ¤– Middleware è‡ªåŠ¨æ‹¦æˆªæ¶ˆæ¯å¤„ç†
   - ğŸ’» å®Œæ•´çš„å®ç°ä»£ç 
   - ğŸ“ˆ Grafana æŸ¥è¯¢ç¤ºä¾‹
   - ğŸ” ä¸ EventBus ç›‘æ§å¯¹æ¯”
   - **æ¨è**: å¿…è¯»!ç”Ÿäº§ç¯å¢ƒå¿…å¤‡ç›‘æ§

4. **[Hollywood å¿«é€Ÿå‚è€ƒ](./hollywood-quick-reference.md)** â­â­â­â­â­
   - ğŸš€ å¿«é€Ÿå¼€å§‹ (5åˆ†é’Ÿä¸Šæ‰‹)
   - âš™ï¸ é…ç½®å‚æ•°è¯¦è§£ (poolSize, inboxSize, maxRestarts)
   - ğŸ“ˆ æ€§èƒ½è°ƒä¼˜ (3ç§åœºæ™¯)
   - ğŸ› å¸¸è§é—®é¢˜
   - **æ¨è**: å¿…è¯»!å¿«é€Ÿä¸Šæ‰‹æŒ‡å—

5. **[Hollywood vs Keyed Worker Pool å¯¹æ¯”](./hollywood-vs-keyed-worker-pool-comparison.md)** â­â­â­â­
   - ğŸ“Š æ¶æ„å¯¹æ¯”
   - ğŸ” æ ¸å¿ƒé—®é¢˜åˆ†æ
   - ğŸ“ˆ æ€§èƒ½å¯¹æ¯”
   - ğŸ’¡ è¿ç§»å»ºè®®
   - **æ¨è**: äº†è§£ä¸ºä»€ä¹ˆè¦è¿ç§»

6. **[README: Hollywood è¿ç§»æ€»è§ˆ](./README-HOLLYWOOD-MIGRATION.md)** â­â­â­â­
   - ğŸ“ å¿«é€Ÿæ€»è§ˆ
   - ğŸ¯ æ ¸å¿ƒæ”¶ç›Š
   - âš™ï¸ é…ç½®å‚æ•° (å« Mailbox æ·±åº¦)
   - ğŸ“ˆ ç›‘æ§æŒ‡æ ‡
   - **æ¨è**: å¿«é€Ÿäº†è§£æ•´ä½“æ–¹æ¡ˆ

6. **[æ—§ç‰ˆ: Hollywood Actor è¿ç§»æŒ‡å—](./hollywood-actor-migration-guide.md)** âš ï¸ å·²åºŸå¼ƒ
   - âš ï¸ æ­¤æ–‡æ¡£åŸºäº"ä¸€ä¸ªèšåˆIDä¸€ä¸ªActor"è®¾è®¡,ä¸é€‚åˆåƒä¸‡çº§èšåˆID
   - âš ï¸ è¯·ä½¿ç”¨ `hollywood-actor-pool-migration-guide.md` ä»£æ›¿

---

## ğŸ“– **æ–‡æ¡£è¯¦æƒ…**

### 1. Hollywood Actor Pool è¿ç§»æŒ‡å— (æ ¸å¿ƒæ–‡æ¡£)

**æ–‡ä»¶**: `hollywood-actor-pool-migration-guide.md`

**å†…å®¹æ¦‚è¦**:
- æ ¸å¿ƒè®¾è®¡ç†å¿µ:
  - åƒä¸‡çº§èšåˆIDçº¦æŸ
  - å›ºå®š Actor Pool (256/512/1024)
  - å•æœºéƒ¨ç½²,æ— åˆ†å¸ƒå¼
  - ä¿æŒé¡ºåºæ€§
- Actor Pool æ¶æ„è®¾è®¡
- å®Œæ•´ä»£ç å®ç°:
  - `hollywood_actor_pool.go` (Poolç®¡ç†)
  - `pool_actor.go` (Actorå®ç°)
  - `hollywood_pool_metrics.go` (ç›‘æ§æŒ‡æ ‡)
- é›†æˆåˆ° EventBus
- é…ç½®ç¤ºä¾‹
- æ€§èƒ½å¯¹æ¯”
- è¿ç§»æ­¥éª¤ (5-8å¤©)

**é€‚åˆäººç¾¤**:
- æ¶æ„å¸ˆ: æ ¸å¿ƒè®¾è®¡æ–¹æ¡ˆ
- å¼€å‘è€…: å®Œæ•´ä»£ç å®ç°
- é¡¹ç›®ç»ç†: å·¥æœŸè¯„ä¼°

**é˜…è¯»æ—¶é—´**: 30-40åˆ†é’Ÿ

---

### 2. Hollywood å¿«é€Ÿå‚è€ƒ

**æ–‡ä»¶**: `hollywood-quick-reference.md`

**å†…å®¹æ¦‚è¦**:
- å¿«é€Ÿå¼€å§‹ (å®‰è£…ã€é…ç½®ã€ä»£ç ç¤ºä¾‹)
- Actor Pool æ¶æ„å¯¹æ¯”
- æ ¸å¿ƒæ¦‚å¿µ:
  - Actor Pool æ¶æ„
  - æ¶ˆæ¯å¤„ç†æµç¨‹
  - Supervisor æœºåˆ¶
- é…ç½®å‚æ•°è¯¦è§£:
  - poolSize (256/512/1024)
  - inboxSize
  - maxRestarts
  - enableEventStream
- æ€§èƒ½è°ƒä¼˜ (3ç§åœºæ™¯)
- ç›‘æ§æŒ‡æ ‡
- å¸¸è§é—®é¢˜ (Q&A)

**é€‚åˆäººç¾¤**:
- å¼€å‘è€…: å¿«é€Ÿä¸Šæ‰‹
- è¿ç»´äººå‘˜: é…ç½®å’Œç›‘æ§

**é˜…è¯»æ—¶é—´**: 10-15åˆ†é’Ÿ

---

### 3. Hollywood vs Keyed Worker Pool å¯¹æ¯”

**æ–‡ä»¶**: `hollywood-vs-keyed-worker-pool-comparison.md`

**å†…å®¹æ¦‚è¦**:
- æ¶æ„å¯¹æ¯” (å›¾ç¤º)
- æ ¸å¿ƒé—®é¢˜åˆ†æ:
  - å¤´éƒ¨é˜»å¡é—®é¢˜
  - èµ„æºåˆ©ç”¨æ•ˆç‡
  - æ•…éšœéš”ç¦»
  - æ¶ˆæ¯å¯é æ€§
- æ€§èƒ½å¯¹æ¯”
- è¿ç§»æ”¶ç›Šæ€»ç»“
- è¿ç§»è·¯å¾„

**é€‚åˆäººç¾¤**:
- å†³ç­–è€…: äº†è§£è¿ç§»ä»·å€¼
- æ¶æ„å¸ˆ: ç†è§£æ¶æ„å·®å¼‚

**é˜…è¯»æ—¶é—´**: 15-20åˆ†é’Ÿ

---



---

## ğŸ—ºï¸ **å­¦ä¹ è·¯å¾„**

### è·¯å¾„ 1: å†³ç­–è€… (20åˆ†é’Ÿ)

```
1. é˜…è¯» "Hollywood vs Keyed Worker Pool å¯¹æ¯”" (10åˆ†é’Ÿ)
   â†“
2. é˜…è¯» "Hollywood Actor Pool è¿ç§»æŒ‡å—" çš„å‰ä¸¤ç«  (10åˆ†é’Ÿ)
   â†“
å†³ç­–: æ˜¯å¦è¿ç§»
```

### è·¯å¾„ 2: æ¶æ„å¸ˆ (1å°æ—¶)

```
1. é˜…è¯» "Hollywood Actor Pool è¿ç§»æŒ‡å—" å®Œæ•´ç‰ˆ (40åˆ†é’Ÿ)
   â†“
2. é˜…è¯» "Hollywood å¿«é€Ÿå‚è€ƒ" (20åˆ†é’Ÿ)
   â†“
è¾“å‡º: è¯¦ç»†è®¾è®¡æ–¹æ¡ˆ
```

### è·¯å¾„ 3: å¼€å‘è€… (1.5å°æ—¶)

```
1. é˜…è¯» "Hollywood å¿«é€Ÿå‚è€ƒ" (15åˆ†é’Ÿ)
   â†“
2. é˜…è¯» "Hollywood Actor Pool è¿ç§»æŒ‡å—" çš„ä»£ç å®ç°éƒ¨åˆ† (45åˆ†é’Ÿ)
   â†“
3. åŠ¨æ‰‹å®è·µ: å®ç°æ ¸å¿ƒç»„ä»¶ (30åˆ†é’Ÿ)
   â†“
è¾“å‡º: å¯è¿è¡Œçš„ä»£ç 
```

### è·¯å¾„ 4: è¿ç»´äººå‘˜ (30åˆ†é’Ÿ)

```
1. é˜…è¯» "Hollywood å¿«é€Ÿå‚è€ƒ" çš„ "é…ç½®å‚æ•°è¯¦è§£" (15åˆ†é’Ÿ)
   â†“
2. é˜…è¯» "Hollywood å¿«é€Ÿå‚è€ƒ" çš„ "æ€§èƒ½è°ƒä¼˜" (15åˆ†é’Ÿ)
   â†“
è¾“å‡º: é…ç½®æ–¹æ¡ˆ
```

---

## ğŸ¯ **å…³é”®å†³ç­–ç‚¹**

### å†³ç­– 1: æ˜¯å¦è¿ç§»?

**é˜…è¯»**:
- `hollywood-vs-keyed-worker-pool-comparison.md`
- `hollywood-actor-pool-migration-guide.md` çš„ "æ ¸å¿ƒä¼˜åŠ¿" ç« èŠ‚

**å†³ç­–ä¾æ®**:
- âœ… éœ€è¦ Supervisor è‡ªåŠ¨é‡å¯æœºåˆ¶ â†’ è¿ç§»
- âœ… éœ€è¦äº‹ä»¶æµç›‘æ§ (DeadLetter, ActorRestarted) â†’ è¿ç§»
- âœ… éœ€è¦æ¶ˆæ¯ä¿è¯é€è¾¾ â†’ è¿ç§»
- âœ… å¯é æ€§è¦æ±‚é«˜ â†’ è¿ç§»
- âŒ å¯¹å¯é æ€§è¦æ±‚ä¸é«˜ â†’ ä¸è¿ç§»
- âŒ å›¢é˜Ÿä¸ç†Ÿæ‚‰ Actor æ¨¡å‹ â†’ è°¨æ…è¯„ä¼°

### å†³ç­– 2: Pool å¤§å°?

**é˜…è¯»**:
- `hollywood-quick-reference.md` çš„ "é…ç½®å‚æ•°è¯¦è§£ - poolSize"

**å‚æ•°é€‰æ‹©**:
- **åƒä¸‡çº§èšåˆ**: poolSize=256 âœ… æ¨è
- **äº¿çº§èšåˆ**: poolSize=512
- **è¶…å¤§è§„æ¨¡**: poolSize=1024
- **å°è§„æ¨¡**: poolSize=128

### å†³ç­– 3: é…ç½®å‚æ•°?

**é˜…è¯»**:
- `hollywood-quick-reference.md` çš„ "æ€§èƒ½è°ƒä¼˜"

**å‚æ•°é€‰æ‹©**:
- **é«˜åå**: poolSize=1024, inboxSize=10000
- **ä½å»¶è¿Ÿ**: poolSize=256, inboxSize=100
- **å†…å­˜å—é™**: poolSize=128, inboxSize=500

---

## ğŸ“Š **è¿ç§»æ—¶é—´è¡¨**

### æ ‡å‡†æ—¶é—´è¡¨ (5-8å¤©) âœ… æ¨è

```
Week 1:
â”œâ”€ Day 1-2: Phase 1 å®ç°é˜¶æ®µ
â”‚  â”œâ”€ å®ç° hollywood_actor_pool.go
â”‚  â”œâ”€ å®ç° pool_actor.go
â”‚  â”œâ”€ å®ç° hollywood_pool_metrics.go
â”‚  â””â”€ é›†æˆåˆ° kafka.go/nats.go
â”‚
â”œâ”€ Day 3-5: Phase 2 æµ‹è¯•é˜¶æ®µ
â”‚  â”œâ”€ å•å…ƒæµ‹è¯•
â”‚  â”œâ”€ é›†æˆæµ‹è¯•
â”‚  â””â”€ æ€§èƒ½æµ‹è¯•
â”‚
â”œâ”€ Day 6-8: Phase 3 ç°åº¦ä¸Šçº¿
â”‚  â”œâ”€ ç‰¹æ€§å¼€å…³: useHollywood=true
â”‚  â”œâ”€ ç›‘æ§å¯¹æ¯”
â”‚  â””â”€ å…¨é‡ä¸Šçº¿
```

### å¿«é€Ÿæ—¶é—´è¡¨ (3-4å¤©,é£é™©è¾ƒé«˜)

```
Week 1:
â”œâ”€ Day 1-2: å®ç° + å•å…ƒæµ‹è¯•
â”œâ”€ Day 3: é›†æˆæµ‹è¯• + æ€§èƒ½æµ‹è¯•
â”œâ”€ Day 4: ç°åº¦ä¸Šçº¿
```

---

## âœ… **æ£€æŸ¥æ¸…å•**

### å¼€å‘å‰æ£€æŸ¥

- [ ] é˜…è¯» `hollywood-actor-pool-migration-guide.md`
- [ ] é˜…è¯» `hollywood-quick-reference.md`
- [ ] ç†è§£ Actor Pool æ¶æ„
- [ ] å‡†å¤‡å¼€å‘ç¯å¢ƒ
- [ ] å®‰è£… Hollywood ä¾èµ–: `go get github.com/anthdm/hollywood@latest`

### å¼€å‘ä¸­æ£€æŸ¥

- [ ] å®ç° `hollywood_actor_pool.go`
- [ ] å®ç° `pool_actor.go`
- [ ] å®ç° `hollywood_pool_metrics.go`
- [ ] é›†æˆåˆ° `kafka.go` å’Œ `nats.go`
- [ ] æ·»åŠ é…ç½®é¡¹: `useHollywood`, `hollywood.poolSize`, etc.
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•è¾¾æ ‡

### ä¸Šçº¿å‰æ£€æŸ¥

- [ ] åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡ (ååé‡ã€å»¶è¿Ÿ)
- [ ] å‹åŠ›æµ‹è¯•é€šè¿‡
- [ ] ç›‘æ§æŒ‡æ ‡é…ç½®å®Œæˆ
- [ ] ç‰¹æ€§å¼€å…³å‡†å¤‡: `useHollywood: false` (é»˜è®¤å…³é—­)
- [ ] å›æ»šæ–¹æ¡ˆå‡†å¤‡

### ä¸Šçº¿åæ£€æŸ¥

- [ ] ç›‘æ§æŒ‡æ ‡æ­£å¸¸ (messages_sent, messages_processed, actors_restarted)
- [ ] æ—  DeadLetter å‘Šè­¦
- [ ] æ€§èƒ½è¾¾åˆ°é¢„æœŸ
- [ ] ç‰¹æ€§å¼€å…³åˆ‡æ¢: `useHollywood: true`
- [ ] æ—§ä»£ç æ¸…ç† (å¯é€‰,ä¿ç•™ Keyed Worker Pool ä½œä¸ºé™çº§æ–¹æ¡ˆ)

---

## ğŸ†˜ **è·å–å¸®åŠ©**

### æ–‡æ¡£é—®é¢˜

- æŸ¥çœ‹æœ¬ç´¢å¼•æ–‡æ¡£
- é˜…è¯»å¯¹åº”çš„è¯¦ç»†æ–‡æ¡£
- æŸ¥çœ‹ä»£ç ç¤ºä¾‹

### æŠ€æœ¯é—®é¢˜

- æŸ¥çœ‹ "Hollywood å¿«é€Ÿå‚è€ƒ" çš„ "å¸¸è§é—®é¢˜"
- æŸ¥çœ‹ Hollywood å®˜æ–¹æ–‡æ¡£: https://github.com/anthdm/hollywood
- æŸ¥çœ‹ Hollywood ç¤ºä¾‹: https://github.com/anthdm/hollywood/tree/master/examples

### å®æ–½é—®é¢˜

- æŸ¥çœ‹ "Hollywood è¿ç§»æŒ‡å—" çš„è¯¦ç»†æ­¥éª¤
- æŸ¥çœ‹ "Hollywood å®ç°ç¤ºä¾‹" çš„ä»£ç 
- å‚è€ƒ jxt-core ç°æœ‰ä»£ç ç»“æ„

---

## ğŸ“ˆ **é¢„æœŸæ”¶ç›Š**

### å¯é æ€§æå‡ (æ ¸å¿ƒæ”¶ç›Š)

- âœ… **Supervisor æœºåˆ¶**: Actor panic è‡ªåŠ¨é‡å¯,ä¸å½±å“å…¶ä»–æ¶ˆæ¯
- âœ… **äº‹ä»¶æµç›‘æ§**: DeadLetter, ActorRestarted äº‹ä»¶
- âœ… **æ¶ˆæ¯ä¿è¯**: Buffer æœºåˆ¶ç¡®ä¿æ¶ˆæ¯ä¸ä¸¢å¤±
- âœ… **æ•…éšœéš”ç¦»**: Actor çº§åˆ«,ä¸€ä¸ª Actor å´©æºƒä¸å½±å“å…¶ä»–255ä¸ª

### å¯è§‚æµ‹æ€§æå‡

- âœ… **æ›´ä¸°å¯Œçš„ç›‘æ§æŒ‡æ ‡**: messages_sent, messages_processed, actors_restarted, dead_letters
- âœ… **äº‹ä»¶æµ**: å®æ—¶ç›‘æ§ Actor çŠ¶æ€å˜åŒ–
- âœ… **å»¶è¿Ÿç»Ÿè®¡**: P99 å»¶è¿Ÿç›‘æ§

### æ€§èƒ½æå‡ (æ¬¡è¦æ”¶ç›Š)

- âœ… ååé‡: 100K â†’ 100-120K TPS (+0-20%)
- âœ… å»¶è¿Ÿ: P99 50ms â†’ 40-50ms (ç•¥æœ‰æ”¹å–„)
- âš ï¸ å†…å­˜å ç”¨: ç›¸åŒ (éƒ½æ˜¯å›ºå®š Pool)

---

## ğŸ“ **å­¦ä¹ èµ„æº**

### Actor æ¨¡å‹

- **The Actor Model**: https://www.brianstorti.com/the-actor-model/
- **Akka Documentation**: https://doc.akka.io/docs/akka/current/typed/guide/introduction.html

### Hollywood æ¡†æ¶

- **Hollywood GitHub**: https://github.com/anthdm/hollywood
- **Hollywood Examples**: https://github.com/anthdm/hollywood/tree/master/examples

### DDD èšåˆè®¾è®¡

- **DDD Aggregate**: https://martinfowler.com/bliki/DDD_Aggregate.html
- **Event Sourcing**: https://microservices.io/patterns/data/event-sourcing.html

---

## ğŸ“ **è”ç³»æ–¹å¼**

å¦‚æœ‰é—®é¢˜,è¯·è”ç³»:
- é¡¹ç›®è´Ÿè´£äºº: [å¾…å¡«å†™]
- æŠ€æœ¯æ”¯æŒ: [å¾…å¡«å†™]
- æ–‡æ¡£ç»´æŠ¤: [å¾…å¡«å†™]

---

**æœ€åæ›´æ–°**: 2025-10-29
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**ç»´æŠ¤è€…**: jxt-core Team

